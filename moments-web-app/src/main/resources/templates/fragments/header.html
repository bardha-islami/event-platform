<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<body>
<header th:fragment="header" class="header_area sticky-header">
  <div class="main_menu">
    <nav class="navbar navbar-expand-lg navbar-light main_box">
      <div class="container">
        <a class="navbar-brand logo_h" th:href="@{/index}">
          <img th:src="@{/img/logo.png}" alt="logo" style="width: 130px; height: auto;">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse offset" id="navbarSupportedContent">
          <ul class="nav navbar-nav menu_nav ml-auto">
            <li class="nav-item active"><a class="nav-link" th:href="@{/index}">Home</a></li>
            <li class="nav-item"><a class="nav-link" th:href="@{/index}">Events</a></li>
            <li class="nav-item submenu dropdown">
              <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                 aria-expanded="false">Account</a>
              <ul class="dropdown-menu">
                <li class="nav-item">
                  <!--                    Logged in as: <span sec:authentication="name"></span>-->
                  <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post" style="width: 100%;">
                    <button type="submit"
                            style="border: none; width: 100%; background: none; cursor: pointer; text-align: left;">
                      <a class="nav-link" style="text-align: left;">Logout</a>
                    </button>
                  </form>

                  <th:block sec:authorize="!isAuthenticated()">
                    <a href="oauth2/code/moments-web-app" class="nav-link">
                      Login
                    </a>
                  </th:block>

                </li>
                <li class="nav-item"><a class="nav-link" th:href="@{/profile}">My Profile</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/events}">My Events</a></li>
              </ul>
            </li>
            <li class="nav-item"><a class="nav-link" th:href="@{/contact}">Contact us</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="nav-item"><a href="#" class="cart" th:href="@{/carts}"><span class="ti-bag"></span></a></li>
            <li class="nav-item">
              <button class="search"><span class="lnr lnr-magnifier" id="search"></span></button>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>
  <div class="search_input" id="search_input_box">
    <div class="container">
      <form class="d-flex justify-content-between" method="get" th:action="@{/index}">
        <input type="text" name="search" class="form-control" id="search_input" placeholder="Search Here"
               th:value="${search}">
        <button type="submit" class="btn"></button>
        <span class="lnr lnr-cross" id="close_search" title="Close Search"></span>
      </form>
    </div>
  </div>
</header>
</body>
</html>